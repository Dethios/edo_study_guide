% =============================================================================
% GLOSSARIES AND ACRONYMS (scrbook-friendly)
%
% - Uses glossaries-extra (no indexer: makenoidxglossaries)
% - Abbrev first use: long (SHORT), thereafter: SHORT
% - Optional: reset acronym "first use" per chapter (toggle below)
% =============================================================================

\usepackage[
  stylemods=all,
  acronym,
  nonumberlist,
  nogroupskip,
  nopostdot,
  toc                   % add entries to the Table of Contents (KOMA-friendly)
]{glossaries-extra}

% --- Abbreviation style: first use "Long (SHORT)", then "SHORT" -------------
\setabbreviationstyle[acronym]{long-short}

% --- Build mode: no external indexing (fast, good for continuous writing) ---
\makenoidxglossaries

% --- Load your acronym definitions ------------------------------------------
\loadglsentries{acronyms.def}

% --- OPTIONAL: reset first-use at each chapter (OFF by default) -------------
% Turn on if you want each chapter to re-introduce acronyms on first use.
\newif\ifResetAcronymsPerChapter
\ResetAcronymsPerChapterfalse
% \ResetAcronymsPerChaptertrue   % <- uncomment to enable per-chapter reset
\ifResetAcronymsPerChapter
  \usepackage{etoolbox}
  \pretocmd{\chapter}{\glsresetall}{}{}
\fi

% --- PDF string safety (bookmarks, etc.) ------------------------------------
% Ensure glossary-related commands render plain text in PDF strings.
\pdfstringdefDisableCommands{%
  \def\gls#1{\glsentrytext{#1}}%
  \def\glspl#1{\glsentryplural{#1}}%
  \def\acrshort#1{\glsentryshort{#1}}%
  \def\acrlong#1{\glsentrylong{#1}}%
  \def\acrfull#1{\glsentrylong{#1}\space(\glsentryshort{#1})}%
}

% --- Shorthand helpers -------------------------------------------------------
\let\ac\gls
\let\acp\glspl
% Capitalized forms for sentence starts
\newcommand{\Ac}[1]{\Gls{#1}}
\newcommand{\Acp}[1]{\Glspl{#1}}

% --- Printing notes ----------------------------------------------------------
% In main.tex you already use:
% \printnoidxglossary[type=\acronymtype, title=List of Acronyms, numberedsection, style=long-booktabs]
% You can add 'toctitle=...' there if you want a different ToC title than the heading.
